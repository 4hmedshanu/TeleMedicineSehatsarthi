<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Successful - Sehat Sarthi Healthcare</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" th:href="@{/css/invoice.css}">
</head>
<body>
    <div class="success-container">
        <div class="success-card">
            <div class="success-header">
                <div class="success-icon">
                    <i class="bi bi-check-circle"></i>
                </div>
                <h1>Appointment Confirmed!</h1>
                <p class="mb-0">Your consultation has been successfully booked</p>
            </div>
            
            <div class="success-body">
                <div class="appointment-details">
                    <h4 class="mb-4" style="color: var(--primary-teal);">Appointment Details</h4>
                    
                    <div class="detail-row">
                        <span class="detail-label">Appointment ID</span>
                        <span class="detail-value" id="appointmentId">SS2025001234</span>
                    </div>
                    
                    <div class="detail-row">
                        <span class="detail-label">Consultation Type</span>
                        <span class="detail-value" id="consultationType">Video Consultation</span>
                    </div>
                    
                    <div class="detail-row">
                        <span class="detail-label">Doctor</span>
                        <span class="detail-value" id="doctorName">Dr. Priya Sharma</span>
                    </div>
                    
                    <div class="detail-row">
                        <span class="detail-label">Specialty</span>
                        <span class="detail-value" id="specialty">Neurology</span>
                    </div>
                    
                    <div class="detail-row">
                        <span class="detail-label">Date & Time</span>
                        <span class="detail-value" id="appointmentDateTime">25 Dec 2025, 02:00 PM</span>
                    </div>
                    
                    <div class="detail-row">
                        <span class="detail-label">Duration</span>
                        <span class="detail-value" id="duration">30 minutes</span>
                    </div>
                </div>
                
                <div class="invoice-section">
                    <h4 class="mb-4" style="color: var(--primary-teal);">Payment Summary</h4>
                    
                    <div class="invoice-row">
                        <span>Consultation Fee</span>
                        <span>₹799</span>
                    </div>
                    
                    <div class="invoice-row">
                        <span>Platform Fee</span>
                        <span>₹49</span>
                    </div>
                    
                    <div class="invoice-row">
                        <span>GST (18%)</span>
                        <span>₹152</span>
                    </div>
                    
                    <div class="invoice-row invoice-total">
                        <span>Total Amount</span>
                        <span>₹1000</span>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn-download" onclick="downloadInvoice()">
                        <i class="bi bi-download"></i>
                        Download Invoice
                    </button>
                    
                    <button class="btn-home" onclick="goToHome()">
                        <i class="bi bi-house"></i>
                        <a href="/" target="_blank" style="text-decoration: none; color: inherit;">Back to Home</a>
                    </button>
                </div>
                
                <div class="confirmation-message">
                    <p>A confirmation email has been sent to your registered email address</p>
                    <p>You will receive a reminder 1 hour before your appointment</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Function to download invoice
        function downloadInvoice() {
            // Create invoice content
            const invoiceContent = `
                SEHAT SARTHI HEALTHCARE
                ========================
                
                INVOICE
                Appointment ID: SS2025001234
                Date: ${new Date().toLocaleDateString()}
                
                Patient Details:
                - Name: [Patient Name]
                - Email: [Patient Email]
                - Phone: [Patient Phone]
                
                Appointment Details:
                - Type: Video Consultation
                - Doctor: Dr. Priya Sharma
                - Specialty: Neurology
                - Date: 25 Dec 2025, 02:00 PM
                - Duration: 30 minutes
                
                Payment Summary:
                - Consultation Fee: ₹799
                - Platform Fee: ₹49
                - GST (18%): ₹152
                - Total: ₹1000
                
                Thank you for choosing Sehat Sarthi Healthcare!
                For any queries, contact: 9368449862
            `;
            
            // Create blob and download
            const blob = new Blob([invoiceContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Invoice_SS2025001234.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            // Show download confirmation
            alert('Invoice downloaded successfully!');
        }
        
        // Function to navigate to home page
        function goToHome() {
            window.location.href = 'mentorship.html'; // Change to your actual home page URL
        }
        
        // Auto-download invoice after 2 seconds
        window.addEventListener('load', function() {
            setTimeout(() => {
                if(confirm('Would you like to download your invoice now?')) {
                    downloadInvoice();
                }
            }, 2000);
        });
        
        // Populate data from URL parameters or localStorage
        document.addEventListener('DOMContentLoaded', function() {
            // Get data from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            
            // Set appointment details from URL parameters or use defaults
            document.getElementById('consultationType').textContent = 
                urlParams.get('type') || 'Video Consultation';
            document.getElementById('doctorName').textContent = 
                urlParams.get('doctor') || 'Dr. Priya Sharma';
            document.getElementById('specialty').textContent = 
                urlParams.get('specialty') || 'Neurology';
            document.getElementById('appointmentDateTime').textContent = 
                urlParams.get('datetime') || '25 Dec 2025, 02:00 PM';
        });
    </script>
</body>
</html>